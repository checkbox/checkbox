plugin: manual
name: miscellanea/chvt
requires:
 package.alias == 'linux'
 package.name == 'kbd'
user: root
command: cycle_vts
_description:
 PURPOSE:
     This test will check that the system can switch to a virtual terminal and back to X
 STEPS:
     1. Click "Test" to switch to another virtual terminal and then back to X
 VERIFICATION:
     Did your screen change temporarily to a text console and then switch back to your current session?

plugin: shell
name: miscellanea/fwts_test
requires:
  package.name == 'linux'
  package.name == 'fwts'
user: root
_description:
 Run Firmware Test Suite (fwts) automated tests.
environ: CHECKBOX_DATA
command:
 fwts_test -l $CHECKBOX_DATA/fwts_results.log

plugin: attachment
name: fwts_results.log
command: cat ${CHECKBOX_DATA}/fwts_results.log
_description: Attaches the FWTS results log to the submission

plugin: shell
name: miscellanea/ipmi_test
requires: package.name == 'ipmitool'
user: root
command: ipmi_test
_description:
 This will run some basic connectivity tests against a BMC, verifying that IPMI works.

plugin: shell
name: miscellanea/is_laptop
user: root
_description:
    Determine if we need to run tests specific to portable computers that may not apply to desktops.
command: check_is_laptop

plugin: shell
name: miscellanea/apport-directory
requires: package.name == 'apport'
command: if [ -d /var/crash ]; then if [ $(find /var/crash -type f | grep -v .lock | wc -l) -eq 0 ]; then echo "/var/crash is empty"; else echo `ls /var/crash`; false; fi; else echo "/var/crash does not exist"; fi
_description: 
 Test that the /var/crash directory doesn't contain anything. Lists the files contained within if it does, or echoes the status of the directory (doesn't exist/is empty)

plugin: shell
name: miscellanea/virtualization-check
requires: cpuinfo.platform in ("i386", "x86_64")
user: root
command: virt_check
_description:
 Test to check that virtualization is supported and the test system has at least a minimal amount of RAM to function as an OpenStack Compute Node
