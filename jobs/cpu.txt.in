plugin: shell
name: cpu/scaling_test
requires: 
 package.name == 'linux'
 package.name == 'fwts'
user: root
command: fwts_test -c -l $CHECKBOX_DATA/cpu_scaling_test.log
_description:
 Test the CPU scaling capabilities using Firmware Test Suite (fwts cpufreq).

plugin: shell
name: cpu/clocktest
requires: package.name == 'linux'
command: clocktest
_description:
 Test for clock jitter.

plugin: shell
name: cpu/offlining_test
requires: package.name == 'linux'
user: root
command: cpu_offlining
_description:
 Test offlining CPUs in a multicore system.

plugin: shell
name: cpu/topology
requires: int(cpuinfo.count) > 1 and (cpuinfo.platform == 'i386' or cpuinfo.platform == 'x86_64')
command: cpu_topology
_description:
 This test checks cpu topology for accuracy

plugin: shell
name: cpu/frequency_governors
requires: package.name == 'linux'
user: root
command: nice -n -20 cpu_scaling_test --log ${CHECKBOX_DATA}/frequency_governors.log 
_description:
 This test checks that CPU frequency governors are obeyed when set.

plugin: attachment
name: cpu/frequency_governors.log
command: [[ -e ${CHECKBOX_DATA}/frequency_governors.log ]] && cat ${CHECKBOX_DATA/frequency_governors.log
_description:
 Attaches the log from the Frequency Governors test to the results
